(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{4228:function(e,t,r){Promise.resolve().then(r.bind(r,7168)),Promise.resolve().then(r.bind(r,570))},1391:function(e,t,r){"use strict";r.d(t,{default:function(){return v}});var n=r(7437),l=r(6648),s=r(7573),a=r(8094),c=r(2265),i=r(4667);function u(e){let{url_preview:t,cardId:r}=e,{activeAudioId:l,setActiveAudioId:u}=(0,i.Q)(),o=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=o.current,t=()=>{u(null)};return e&&e.addEventListener("ended",t),()=>{e&&e.removeEventListener("ended",t)}},[u]),(0,c.useEffect)(()=>{o.current&&l!==r&&o.current.pause()},[l,r]),(0,n.jsxs)(n.Fragment,{children:[l===r?(0,n.jsx)("button",{className:"btn btn-circle btn-secondary btn-sm",onClick:()=>{o.current&&(o.current.pause(),u(null))},children:(0,n.jsx)(s.Z,{className:"w-4 h-4"})}):(0,n.jsx)("button",{className:"btn btn-circle btn-primary btn-sm",onClick:()=>{o.current&&(o.current.play(),u(r))},children:(0,n.jsx)(a.Z,{className:"w-4 h-4"})}),(0,n.jsx)("audio",{ref:o,src:t})]})}var o=r(8472),d=r(8125),h=r(4697);function x(e){let{cardId:t,onDelete:r}=e,[l,s]=(0,c.useState)(!1),[a,i]=(0,c.useState)(null),{token:u}=(0,d.a)(),x=async()=>{s(!0),i(null);try{let e="http://localhost:3000/deleteMusic/".concat(t);await o.Z.delete(e,{headers:{Authorization:"Bearer ".concat(u)}}),r(t)}catch(e){i("Failed to delete the music. Please try again.")}finally{s(!1)}};return(0,n.jsx)("button",{onClick:x,disabled:l,className:"btn btn-circle btn-secondary btn-sm",children:(0,n.jsx)(h.Z,{})})}function m(e){let{children:t}=e;return(0,n.jsx)("div",{className:"card-actions justify-end flex-row",children:t})}var f=r(6273);function j(e){let{artiste:t,titre:r,url_preview:l,url_cover_album_big:s}=e,{token:a}=(0,d.a)(),c=async()=>{try{await o.Z.post("http://localhost:3000/addMusic",{artiste:t,titre:r,url_preview:l,url_cover_album_big:s},{headers:{Authorization:"Bearer ".concat(a)}})}catch(e){console.log(e)}};return(0,n.jsx)("button",{onClick:c,className:"btn btn-circle btn-secondary btn-sm",children:(0,n.jsx)(f.Z,{})})}function v(e){let{cardId:t,name_artist:r,name_song:s,url_preview:a,url_cover_album_big:i,nom:o="raffoul",prenom:d="pierre",audioButton:h=!1,size:f="h-full w-full",withBlock:v=!1,deleteButton:b=!1,addButton:p=!1}=e,[w,g]=(0,c.useState)(!1),N=e=>{g(!0)};return w?null:(0,n.jsx)(n.Fragment,{children:v?(0,n.jsx)("div",{className:"w-[220px] h-[360px] bg-sky-950 rounded-2xl",children:(0,n.jsxs)("div",{className:"card glass ".concat(f),children:[(0,n.jsx)("figure",{className:"h-50",children:(0,n.jsx)(l.default,{className:"object-contain",src:i,alt:r+" "+s,width:500,height:500,objectFit:"contain",priority:!0})}),(0,n.jsxs)("div",{className:"card-body p-4",children:[(0,n.jsx)("h2",{className:"card-title text-sm",children:s}),(0,n.jsx)("p",{className:"text-xs",children:r}),(0,n.jsxs)("p",{className:"text-xs",children:["liked by ",(0,n.jsx)("em",{children:d+" "+o})]}),(0,n.jsxs)(m,{children:[b?(0,n.jsx)(x,{cardId:t,onDelete:N}):null,p?(0,n.jsx)(j,{titre:s,artiste:r,url_preview:a,url_cover_album_big:i}):null,h?(0,n.jsx)(u,{url_preview:a,cardId:t}):null]})]})]})}):(0,n.jsxs)("div",{className:"card glass ".concat(f),children:[(0,n.jsx)("figure",{className:"h-50",children:(0,n.jsx)(l.default,{className:"object-contain",src:i,alt:r+" "+s,width:500,height:500,objectFit:"contain",priority:!0})}),(0,n.jsxs)("div",{className:"card-body p-4",children:[(0,n.jsx)("h2",{className:"card-title text-sm",children:s}),(0,n.jsx)("p",{className:"text-xs",children:r}),(0,n.jsxs)("p",{className:"text-xs",children:["liked by ",(0,n.jsx)("em",{children:d+" "+o})]}),(0,n.jsxs)(m,{children:[b?(0,n.jsx)(x,{cardId:t,onDelete:N}):null,p?(0,n.jsx)(j,{titre:s,artiste:r,url_preview:a,url_cover_album_big:i}):null,h?(0,n.jsx)(u,{url_preview:a,cardId:t}):null]})]})]})})}},4667:function(e,t,r){"use strict";r.d(t,{AudioProvider:function(){return a},Q:function(){return c}});var n=r(7437),l=r(2265);let s=(0,l.createContext)(void 0),a=e=>{let{children:t}=e,[r,a]=(0,l.useState)(null),c=(0,l.useCallback)(e=>{a(e)},[]);return(0,n.jsx)(s.Provider,{value:{activeAudioId:r,setActiveAudioId:c},children:t})},c=()=>{let e=(0,l.useContext)(s);if(void 0===e)throw Error("useAudio must be used within an AudioProvider");return e}},8125:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return a},a:function(){return c}});var n=r(7437),l=r(2265);let s=(0,l.createContext)(void 0),a=e=>{let{children:t}=e,[r,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&a(e)},[]),(0,l.useEffect)(()=>{r?localStorage.setItem("token",r):localStorage.removeItem("token")},[r]),(0,n.jsx)(s.Provider,{value:{token:r,setToken:a,login:e=>{a(e)},logout:()=>{a(null),window.location.href="/"}},children:t})},c=()=>{let e=(0,l.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:function(e,t,r){"use strict";r.d(t,{default:function(){return s}});var n=r(7437),l=r(8125);function s(){let{logout:e}=(0,l.a)();return(0,n.jsx)("li",{onClick:e,children:(0,n.jsx)("a",{children:"Deconnexion"})})}},570:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),l=r(8472),s=r(2265),a=r(1391);function c(){let[e,t]=(0,s.useState)(""),[r,c]=(0,s.useState)(""),[i,u]=(0,s.useState)([]),o=async function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=""===t?"https://api.deezer.com/chart":"https://api.deezer.com/search?q=".concat(encodeURIComponent(t));try{let r=await l.Z.get(e),n=""===t?r.data.tracks.data.slice(0,20):r.data.data.slice(0,20);0===n.length?c("Aucune donn\xe9e trouv\xe9e"):(u(n),c(""))}catch(e){c("Erreur au moment de la requ\xeate"),console.log(e)}};return(0,s.useEffect)(()=>{let t=setTimeout(()=>{o(e)},300);return()=>clearTimeout(t)},[e]),(0,s.useEffect)(()=>{e||o("")},[]),(0,n.jsxs)("div",{className:"h-auto w-full",children:[(0,n.jsxs)("label",{className:"input input-bordered flex items-center gap-2",children:[(0,n.jsx)("input",{type:"text",className:"grow",placeholder:"Search",value:e,onChange:e=>{t(e.target.value)}}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})})]}),(0,n.jsx)("div",{className:"w-full h-auto flex flex-row justify-center items-center flex-wrap gap-10 p-10",children:i.map((e,t)=>(0,n.jsx)(a.default,{cardId:e.id,name_artist:e.artist.name,name_song:e.title,url_preview:e.preview,url_cover_album_big:e.album.cover_big,nom:"",prenom:"",audioButton:!0,withBlock:!0,addButton:!0},t))}),r&&(0,n.jsx)("p",{className:"text-red-500",children:r})]})}}},function(e){e.O(0,[472,215,971,23,744],function(){return e(e.s=4228)}),_N_E=e.O()}]);