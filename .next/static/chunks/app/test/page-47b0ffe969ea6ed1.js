(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{1659:function(e,t,n){Promise.resolve().then(n.bind(n,1391)),Promise.resolve().then(n.bind(n,7168)),Promise.resolve().then(n.bind(n,1756))},1391:function(e,t,n){"use strict";n.d(t,{default:function(){return b}});var r=n(7437),s=n(6648),l=n(7573),c=n(8094),i=n(2265),a=n(4667);function u(e){let{url_preview:t,cardId:n}=e,{activeAudioId:s,setActiveAudioId:u}=(0,a.Q)(),o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=o.current,t=()=>{u(null)};return e&&e.addEventListener("ended",t),()=>{e&&e.removeEventListener("ended",t)}},[u]),(0,i.useEffect)(()=>{o.current&&s!==n&&o.current.pause()},[s,n]),(0,r.jsxs)(r.Fragment,{children:[s===n?(0,r.jsx)("button",{className:"btn btn-circle btn-secondary btn-sm",onClick:()=>{o.current&&(o.current.pause(),u(null))},children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})}):(0,r.jsx)("button",{className:"btn btn-circle btn-primary btn-sm",onClick:()=>{o.current&&(o.current.play(),u(n))},children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})}),(0,r.jsx)("audio",{ref:o,src:t})]})}var o=n(8472),d=n(8125),h=n(4697);function x(e){let{cardId:t,onDelete:n}=e,[s,l]=(0,i.useState)(!1),[c,a]=(0,i.useState)(null),{token:u}=(0,d.a)(),x=async()=>{l(!0),a(null);try{let e="http://localhost:3000/deleteMusic/".concat(t);await o.Z.delete(e,{headers:{Authorization:"Bearer ".concat(u)}}),n(t)}catch(e){a("Failed to delete the music. Please try again.")}finally{l(!1)}};return(0,r.jsx)("button",{onClick:x,disabled:s,className:"btn btn-circle btn-secondary btn-sm",children:(0,r.jsx)(h.Z,{})})}function f(e){let{children:t}=e;return(0,r.jsx)("div",{className:"card-actions justify-end flex-row",children:t})}var j=n(6273);function m(e){let{artiste:t,titre:n,url_preview:s,url_cover_album_big:l}=e,{token:c}=(0,d.a)(),i=async()=>{try{await o.Z.post("http://localhost:3000/addMusic",{artiste:t,titre:n,url_preview:s,url_cover_album_big:l},{headers:{Authorization:"Bearer ".concat(c)}})}catch(e){console.log(e)}};return(0,r.jsx)("button",{onClick:i,className:"btn btn-circle btn-secondary btn-sm",children:(0,r.jsx)(j.Z,{})})}function b(e){let{cardId:t,name_artist:n,name_song:l,url_preview:c,url_cover_album_big:a,nom:o="raffoul",prenom:d="pierre",audioButton:h=!1,size:j="h-full w-full",withBlock:b=!1,deleteButton:v=!1,addButton:p=!1}=e,[N,g]=(0,i.useState)(!1),w=e=>{g(!0)};return N?null:(0,r.jsx)(r.Fragment,{children:b?(0,r.jsx)("div",{className:"w-[220px] h-[360px] bg-sky-950 rounded-2xl",children:(0,r.jsxs)("div",{className:"card glass ".concat(j),children:[(0,r.jsx)("figure",{className:"h-50",children:(0,r.jsx)(s.default,{className:"object-contain",src:a,alt:n+" "+l,width:500,height:500,objectFit:"contain",priority:!0})}),(0,r.jsxs)("div",{className:"card-body p-4",children:[(0,r.jsx)("h2",{className:"card-title text-sm",children:l}),(0,r.jsx)("p",{className:"text-xs",children:n}),(0,r.jsxs)("p",{className:"text-xs",children:["liked by ",(0,r.jsx)("em",{children:d+" "+o})]}),(0,r.jsxs)(f,{children:[v?(0,r.jsx)(x,{cardId:t,onDelete:w}):null,p?(0,r.jsx)(m,{titre:l,artiste:n,url_preview:c,url_cover_album_big:a}):null,h?(0,r.jsx)(u,{url_preview:c,cardId:t}):null]})]})]})}):(0,r.jsxs)("div",{className:"card glass ".concat(j),children:[(0,r.jsx)("figure",{className:"h-50",children:(0,r.jsx)(s.default,{className:"object-contain",src:a,alt:n+" "+l,width:500,height:500,objectFit:"contain",priority:!0})}),(0,r.jsxs)("div",{className:"card-body p-4",children:[(0,r.jsx)("h2",{className:"card-title text-sm",children:l}),(0,r.jsx)("p",{className:"text-xs",children:n}),(0,r.jsxs)("p",{className:"text-xs",children:["liked by ",(0,r.jsx)("em",{children:d+" "+o})]}),(0,r.jsxs)(f,{children:[v?(0,r.jsx)(x,{cardId:t,onDelete:w}):null,p?(0,r.jsx)(m,{titre:l,artiste:n,url_preview:c,url_cover_album_big:a}):null,h?(0,r.jsx)(u,{url_preview:c,cardId:t}):null]})]})]})})}},4667:function(e,t,n){"use strict";n.d(t,{AudioProvider:function(){return c},Q:function(){return i}});var r=n(7437),s=n(2265);let l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[n,c]=(0,s.useState)(null),i=(0,s.useCallback)(e=>{c(e)},[]);return(0,r.jsx)(l.Provider,{value:{activeAudioId:n,setActiveAudioId:i},children:t})},i=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAudio must be used within an AudioProvider");return e}},8125:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return c},a:function(){return i}});var r=n(7437),s=n(2265);let l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[n,c]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("token");e&&c(e)},[]),(0,s.useEffect)(()=>{n?localStorage.setItem("token",n):localStorage.removeItem("token")},[n]),(0,r.jsx)(l.Provider,{value:{token:n,setToken:c,login:e=>{c(e)},logout:()=>{c(null),window.location.href="/"}},children:t})},i=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var r=n(7437),s=n(8125);function l(){let{logout:e}=(0,s.a)();return(0,r.jsx)("li",{onClick:e,children:(0,r.jsx)("a",{children:"Deconnexion"})})}},1756:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var r=n(7437),s=n(8125);function l(){let{token:e}=(0,s.a)();return(0,r.jsx)(r.Fragment,{children:e?(0,r.jsx)("h1",{children:"Token existe bien dans le localstorage"}):(0,r.jsx)("h1",{children:"Pas de token dans le localstorage"})})}}},function(e){e.O(0,[472,215,971,23,744],function(){return e(e.s=1659)}),_N_E=e.O()}]);